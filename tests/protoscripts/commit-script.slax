version 1.1;

ns axsl = "http://www.w3.org/1999/XSL/TransformAlias";
ns-alias axsl xsl;

match / {
    <axsl:stylesheet version="1.0"> {
	<axsl:import href="../import/junos.xsl">;
	<axsl:import href="../protoscripts/commit-script-lib.slax">;
        <axsl:template match="configuration"> {
	    for-each (* /commit-script/ *) {
		var $select = xsl:value-of/@select;
		if (name() == "prevent") {
		    <axsl:call-template name="do-prevent"> {
			<axsl:with-param name="name" select="'" _ $select _ "'">;
			<axsl:with-param name="select" select=$select>;
		    }
		} else if (name() == "require") {
		    <axsl:call-template name="do-require"> {
			<axsl:with-param name="name" select="'" _ $select _ "'">;
			<axsl:with-param name="select" select=$select>;
		    }
		} else {
		    terminate "unknown directive: " _ name();
		}
	    }
        }
    }
}
