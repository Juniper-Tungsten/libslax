version 1.1;

ns brace extension = "http://xml.juniper.net/brace";

import "junos-data.slax";

output-method { indent "yes"; }

mvar $indent = "::";
var $nl = "\n";

match / {
    <configuration-text> {
	apply-templates configuration;
    }
}

match * {
    var $save = $indent;

    <line indent=$indent> name() _ " {";
    expr $nl;
    append $indent += "::";

    apply-templates;

    <line> "}";
    expr $nl;
    set $indent = $save;
}

match text() {
    /* nothing */
}

function brace:multi-ident ($dot) {
    result false();
}

function brace:quote ($value) {
    result "\"" _ $value _ "\"";
}
